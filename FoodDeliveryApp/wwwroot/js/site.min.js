document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("themeCustomizerPanel"),t=document.getElementById("themeToggleBtn"),n=document.querySelectorAll(".theme-mode-btn"),o=document.querySelectorAll(".theme-color-btn"),a=document.getElementById("reducedMotionToggle"),s=document.getElementById("highContrastToggle"),i=document.getElementById("resetThemeBtn"),d=document.documentElement,r=document.body,c=document.querySelectorAll(".theme-toggle");t&&t.addEventListener("click",()=>{e.classList.toggle("open"),t.setAttribute("aria-expanded",e.classList.contains("open"))}),document.addEventListener("click",t=>{e&&!e.contains(t.target)&&t!==t&&(e.classList.remove("open"),t.setAttribute("aria-expanded","false"))}),n.forEach(e=>{e.addEventListener("click",()=>{n.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.mode;"auto"===t?(d.dataset.bsTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem("themeMode","auto"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{"auto"===localStorage.getItem("themeMode")&&(d.dataset.bsTheme=e.matches?"dark":"light",l())})):(d.dataset.bsTheme=t,localStorage.setItem("themeMode",t)),l()})}),o.forEach(e=>{e.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.color,n={default:{primary:"#ff5733",dark:"#e64400",light:"#ff8c66",rgb:"255, 87, 51"},blue:{primary:"#3498db",dark:"#2980b9",light:"#5dade2",rgb:"52, 152, 219"},green:{primary:"#2ecc71",dark:"#27ae60",light:"#58d68d",rgb:"46, 204, 113"},purple:{primary:"#9b59b6",dark:"#8e44ad",light:"#bb8fce",rgb:"155, 89, 182"},teal:{primary:"#1abc9c",dark:"#16a085",light:"#48c9b0",rgb:"26, 188, 156"}}[t]||n.default,a=n.primary,s=n.dark,i=n.light,r=n.rgb;document.documentElement.style.setProperty("--primary",a),document.documentElement.style.setProperty("--primary-dark",s),document.documentElement.style.setProperty("--primary-light",i),document.documentElement.style.setProperty("--primary-rgb",r);const c=document.querySelector('meta[name="theme-color"]');c&&c.setAttribute("content",a),localStorage.setItem("themeColor",t)})}),a&&a.addEventListener("change",()=>{r.classList.toggle("reduced-motion",a.checked),localStorage.setItem("reducedMotion",a.checked)}),s&&s.addEventListener("change",()=>{r.classList.toggle("high-contrast",s.checked),localStorage.setItem("highContrast",s.checked)}),i&&i.addEventListener("click",()=>{d.dataset.bsTheme="light",document.documentElement.style.removeProperty("--primary"),document.documentElement.style.removeProperty("--primary-dark"),document.documentElement.style.removeProperty("--primary-light"),document.documentElement.style.removeProperty("--primary-rgb"),n.forEach(e=>e.classList.remove("active")),document.querySelector(".light-mode-btn").classList.add("active"),o.forEach(e=>e.classList.remove("active")),document.querySelector('[data-color="default"]').classList.add("active"),a.checked=!1,s.checked=!1,r.classList.remove("reduced-motion","high-contrast");const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content","#ff5733"),localStorage.clear(),l(),m("Theme reset to default")});function l(){const e="dark"===d.dataset.bsTheme;c.forEach(t=>{const n=t.querySelector(".theme-icon-light"),o=t.querySelector(".theme-icon-dark");n&&o&&(n.classList.toggle("d-none",e),o.classList.toggle("d-none",!e))})}c.forEach(e=>{e.addEventListener("click",()=>{const e="dark"===d.dataset.bsTheme?"light":"dark";d.dataset.bsTheme=e,localStorage.setItem("themeMode",e),l(),m(`${e.charAt(0).toUpperCase()+e.slice(1)} mode activated`)})});function m(e,t="primary"){let n=document.querySelector(".toast-container");n||(n=document.createElement("div"),n.className="toast-container",document.body.appendChild(n));const o=document.createElement("div");o.className=`toast align-items-center text-white bg-${t} border-0 shadow-sm mb-2`,o.style.minWidth="200px",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),o.innerHTML=`\n            <div class="d-flex">\n                <div class="toast-body">${e}</div>\n                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n            </div>\n        `,n.appendChild(o);const a=new bootstrap.Toast(o,{delay:3e3});a.show(),o.addEventListener("hidden.bs.toast",()=>o.remove())}const h=localStorage.getItem("themeMode"),g=localStorage.getItem("themeColor"),p=localStorage.getItem("reducedMotion"),u=localStorage.getItem("highContrast");h?document.querySelector(`.theme-mode-btn[data-mode="${h}"]`)?.click():l(),g&&document.querySelector(`.theme-color-btn[data-color="${g}"]`)?.click(),"true"===p&&(a.checked=!0,r.classList.add("reduced-motion")),"true"===u&&(s.checked=!0,r.classList.add("high-contrast"));const v=document.querySelector(".scroll-progress-bar span");window.addEventListener("scroll",()=>{const e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=e/t*100;v&&(v.style.width=`${n}%`)});const f=document.getElementById("backToTop");window.addEventListener("scroll",()=>{f&&(window.scrollY>300?f.classList.add("show"):f.classList.remove("show"))}),f&&f.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".toast").forEach(e=>{const t=new bootstrap.Toast(e,{delay:5e3});t.show()});const y=document.querySelector(".mainHeader");let b=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(y){if(e<=0)return void y.classList.remove("scroll-up");e>b&&!y.classList.contains("scroll-down")?(y.classList.remove("scroll-up"),y.classList.add("scroll-down")):e<b&&y.classList.contains("scroll-down")&&(y.classList.remove("scroll-down"),y.classList.add("scroll-up")),b=e}}),l()});const debounce=(e,t)=>{let n;return function(...o){const a=()=>{clearTimeout(n),e(...o)};clearTimeout(n),n=setTimeout(a,t)}},ThemeManager={init(){this.themeKey="food-delivery-theme",this.root=document.documentElement,this.prefersDark=window.matchMedia("(prefers-color-scheme: dark)");const e=localStorage.getItem(this.themeKey);this.setTheme(e||(this.prefersDark.matches?"dark":"light")),this.prefersDark.addEventListener("change",e=>{localStorage.getItem(this.themeKey)||this.setTheme(e.matches?"dark":"light")}),document.querySelectorAll("[data-theme-toggle]").forEach(e=>{e.addEventListener("click",()=>{this.toggleTheme()})})},setTheme(e){this.root.setAttribute("data-bs-theme",e),localStorage.setItem(this.themeKey,e),this.updateUI(e)},toggleTheme(){const e="dark"===this.root.getAttribute("data-bs-theme")?"light":"dark";this.setTheme(e)},updateUI(e){document.querySelectorAll("[data-theme-icon]").forEach(t=>{t.classList.toggle("d-none",t.dataset.themeIcon!==e)})}},Navigation={init(){this.header=document.querySelector(".mainHeader"),this.scrollThreshold=100,this.scrolled=!1,window.addEventListener("scroll",debounce(()=>this.handleScroll(),10));const e=document.getElementById("mobileMenu");e&&(e.addEventListener("show.bs.offcanvas",()=>{document.body.style.overflow="hidden"}),e.addEventListener("hidden.bs.offcanvas",()=>{document.body.style.overflow=""}))},handleScroll(){const e=(window.pageYOffset||document.documentElement.scrollTop)>this.scrollThreshold;e!==this.scrolled&&(this.header.classList.toggle("scrolled",e),this.scrolled=e)}},FormEnhancer={init(){this.setupForms(),this.setupPasswordToggles()},setupForms(){document.querySelectorAll("form").forEach(e=>{e.classList.contains("no-validate")||(e.addEventListener("submit",t=>{e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),e.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("blur",()=>{this.validateField(e)})}))})},setupPasswordToggles(){document.querySelectorAll(".password-toggle").forEach(e=>{const t=e.previousElementSibling;t&&"password"===t.type&&e.addEventListener("click",()=>{const n="password"===t.type;t.type=n?"text":"password",e.innerHTML=`<i class="bi bi-${n?"eye-slash":"eye"}"></i>`})})},validateField(e){const t=e.closest(".form-group")||e.parentElement,n=t.querySelector(".invalid-feedback")||document.createElement("div");e.validity.valid?(e.classList.remove("is-invalid"),n.remove()):(n.className="invalid-feedback",n.textContent=e.validationMessage,t.querySelector(".invalid-feedback")||t.appendChild(n),e.classList.add("is-invalid"))}},ToastManager={init(){this.container=document.querySelector(".toast-container")||this.createContainer()},createContainer(){const e=document.createElement("div");return e.className="toast-container position-fixed top-0 end-0 p-3",document.body.appendChild(e),e},show(e,t="success"){const n=document.createElement("div");n.className=`toast align-items-center text-white bg-${t} border-0`,n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),n.innerHTML=`\n            <div class="d-flex">\n                <div class="toast-body">\n                    <i class="bi bi-${t==='success'?'check-circle':'exclamation-circle'} me-2"></i>\n                    ${e}\n                </div>\n                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n            </div>\n        `,this.container.appendChild(n);const o=new bootstrap.Toast(n);o.show(),n.addEventListener("hidden.bs.toast",()=>{n.remove()})}},CartManager={init(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]"),this.updateCartCount(),document.addEventListener("click",e=>{e.target.matches("[data-add-to-cart]")&&this.handleAddToCart(e)})},handleAddToCart(e){e.preventDefault();const t=e.target,n=t.dataset.addToCart,o=t.dataset.name,a=parseFloat(t.dataset.price);this.addItem({id:n,name:o,price:a,quantity:1}),t.classList.add("btn-success"),setTimeout(()=>t.classList.remove("btn-success"),1500),ToastManager.show(`${o} added to cart`)},addItem(e){const t=this.cart.find(t=>t.id===e.id);t?t.quantity+=e.quantity:this.cart.push(e),this.saveCart()},updateCartCount(){const e=this.cart.reduce((e,t)=>e+t.quantity,0);document.querySelectorAll(".cart-count").forEach(t=>{t.textContent=e})},saveCart(){localStorage.setItem("cart",JSON.stringify(this.cart)),this.updateCartCount()}},LazyLoader={init(){if(this.images=document.querySelectorAll('img[loading="lazy"]'),"loading"in HTMLImageElement.prototype)return;this.imageObserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(this.loadImage(e.target),t.unobserve(e.target))})}),this.images.forEach(e=>this.imageObserver.observe(e))},loadImage(e){const t=e.dataset.src;t&&(e.src=t,e.removeAttribute("data-src"))}};document.addEventListener("DOMContentLoaded",()=>{ThemeManager.init(),Navigation.init(),FormEnhancer.init(),ToastManager.init(),CartManager.init(),LazyLoader.init();[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(e=>new bootstrap.Tooltip(e));[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(e=>new bootstrap.Popover(e))}); 