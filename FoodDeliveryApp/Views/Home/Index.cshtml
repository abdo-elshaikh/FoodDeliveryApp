@model FoodDeliveryApp.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Home";
    ViewData["ActiveMenu"] = "Home";
    var appName = "FoodFast Pro";
}

<!-- Hero Section -->
<section class="hero-section position-relative overflow-hidden py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 py-5">
                <h1 class="display-4 fw-bold mb-3 text-primary animate__animated animate__fadeInUp">
                    Premium Dining<br>Delivered to Your Door
                </h1>
                <p class="lead mb-4 text-dark animate__animated animate__fadeInUp animate__delay-1s">
                    Discover top local restaurants with AI-driven recommendations on @appName.
                </p>

                <form asp-action="Search" asp-controller="Home" method="post" role="search"
                      class="mb-4 animate__animated animate__fadeInUp animate__delay-2s">
                    <div class="input-group input-group-lg position-relative shadow-sm" style="max-width: 600px;">
                        <span class="input-group-text bg-white border-end-0">
                            <i class="bi bi-search text-primary"></i>
                        </span>
                        <input id="search-input" class="form-control border-start-0" type="search"
                               placeholder="Search cuisines, restaurants, or dishes..." aria-label="Search" name="Query"
                               value="@Model.Search.Query" autocomplete="off" />
                        <input type="hidden" name="Location" value="@Model.Search.Location" />
                        <button class="btn btn-primary px-4 fw-medium" type="submit" aria-label="Search">
                            Search
                        </button>
                        <div id="searchSuggestions" class="position-absolute w-100 start-0 bg-white rounded shadow-lg"
                             style="top: 100%; z-index: 1000; display: none; max-height: 300px; overflow-y: auto;">
                            <!-- Suggestions will be populated dynamically -->
                        </div>
                    </div>
                </form>

                <div class="animate__animated animate__fadeInUp animate__delay-3s">
                    <button id="geoLocateBtn" class="btn btn-outline-primary rounded-pill">
                        <i class="bi bi-geo-alt me-1"></i> Find Nearby Restaurants
                    </button>
                    <div class="mt-2 text-muted">
                        <i class="bi bi-pin-map"></i> Current location: <span class="fw-medium">@Model.CurrentLocation</span>
                    </div>
                </div>

                <div class="d-flex flex-wrap gap-3 mt-4 animate__animated animate__fadeInUp animate__delay-4s">
                    <div class="feature-badge">
                        <span class="feature-icon"><i class="bi bi-clock text-primary"></i></span>
                        <span>Fast Delivery</span>
                    </div>
                    <div class="feature-badge">
                        <span class="feature-icon"><i class="bi bi-shield-check text-primary"></i></span>
                        <span>Quality Assured</span>
                    </div>
                    <div class="feature-badge">
                        <span class="feature-icon"><i class="bi bi-geo-alt text-primary"></i></span>
                        <span>Live Tracking</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 position-relative d-none d-lg-block animate__animated animate__fadeIn animate__delay-3s">
                <div class="hero-image-container">
                    <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0" alt="Premium dining experience"
                         class="img-fluid rounded-4 shadow-lg" />
                    <div class="hero-rating-badge animate__animated animate__fadeInUp animate__delay-6s">
                        <div class="d-flex align-items-center">
                            <div class="bg-primary rounded-circle p-2 me-3 text-white">
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <div>
                                <div class="fw-bold">4.9 / 5.0</div>
                                <div class="small text-muted">Customer Satisfaction</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Categories -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h2 class="h3 fw-bold mb-0 animate__animated animate__fadeInUp">Explore by Category</h2>
            <a asp-controller="Category" asp-action="Index" class="btn btn-link text-decoration-none animate__animated animate__fadeInUp">
                View All <i class="bi bi-arrow-right"></i>
            </a>
        </div>

        <div class="row g-4">
            @{
                    var featuredCategories = Model.Categories.Take(6).ToList();
                    var categoryIcons = new string[] { "egg-fried", "cup-hot", "egg", "apple", "pizza", "flower2" };
            }
            @for (int i = 0; i < featuredCategories.Count; i++)
            {
                    var category = featuredCategories[i];
                    var iconClass = i < categoryIcons.Length ? categoryIcons[i] : "tag";
                    <div class="col-lg-2 col-md-3 col-6 animate__animated animate__fadeInUp" style="animation-delay: @(i * 100)ms">
                        <a asp-controller="Category" asp-action="Details" asp-route-id="@category.Id" class="text-decoration-none">
                            <div class="category-card">
                                <div class="category-icon"><i class="bi bi-@iconClass"></i></div>
                                <h3 class="h6 fw-medium mb-0 text-dark">@category.Name</h3>
                            </div>
                        </a>
                    </div>
            }
        </div>
    </div>
</section>

<!-- Filters Bar -->
<section class="filter-bar sticky-top shadow-sm bg-white py-3">
    <div class="container">
        <div class="d-flex flex-wrap gap-2 align-items-center">
            <div class="filter-group">
                <label class="filter-label" for="categoryFilter"><i class="bi bi-funnel text-primary"></i></label>
                <select class="filter-select" aria-label="Category filter" id="categoryFilter">
                    <option value="">All Categories</option>
                    @foreach (var category in Model.Categories)
                    {
                            <option value="@category.Id">@category.Name</option>
                    }
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label" for="ratingFilter"><i class="bi bi-star-fill text-primary"></i></label>
                <select class="filter-select" aria-label="Rating filter" id="ratingFilter">
                    <option value="">All Ratings</option>
                    <option value="4">4+ Stars</option>
                    <option value="3">3+ Stars</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label" for="distanceFilter"><i class="bi bi-geo-alt text-primary"></i></label>
                <select class="filter-select" aria-label="Distance filter" id="distanceFilter">
                    <option value="">All Distances</option>
                    <option value="5">Within 5 miles</option>
                    <option value="10">Within 10 miles</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label" for="priceFilter"><i class="bi bi-cash-stack text-primary"></i></label>
                <select class="filter-select" aria-label="Price filter" id="priceFilter">
                    <option value="">All Prices</option>
                    <option value="1">$</option>
                    <option value="2">$$</option>
                    <option value="3">$$$</option>
                </select>
            </div>
            <button class="btn btn-primary btn-sm rounded-pill" id="applyFilters">
                <i class="bi bi-filter me-1"></i> Apply Filters
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-auto d-none d-md-block" id="toggleViewBtn">
                <i class="bi bi-grid"></i>
            </button>
        </div>
    </div>
</section>

<!-- Popular Restaurants Section -->
<section class="py-5">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h2 class="h3 fw-bold mb-0 animate__animated animate__fadeInUp">
                Popular in @Model.CurrentLocation
                <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill ms-2 fs-6">@Model.PopularRestaurants.Count()</span>
            </h2>
            <a asp-controller="Restaurants" asp-action="Index" class="btn btn-link text-decoration-none animate__animated animate__fadeInUp">
                View All <i class="bi bi-arrow-right"></i>
            </a>
        </div>

        <div id="restaurantGrid" class="row g-4">
            @foreach (var restaurant in Model.PopularRestaurants)
            {
                    <div class="col-lg-4 col-md-6 restaurant-card animate__animated animate__fadeInUp"
                         data-category="@restaurant.CategoryId" data-rating="@restaurant.Rating"
                         data-distance="@restaurant.Distance" data-price="@restaurant.PriceLevel">
                        <article class="restaurant-item">
                            <div class="restaurant-image-container">
                                <img src="@restaurant.ImageUrl" alt="@restaurant.Name" class="restaurant-image"/>
                                @if (restaurant.Rating >= (decimal)4.5)
                                {
                                        <span class="top-rated-badge"><i class="bi bi-award-fill me-1"></i> Top Rated</span>
                                }
                                <div class="delivery-time-badge"><i class="bi bi-clock me-1"></i> @restaurant.DeliveryTime</div>
                            </div>
                            <div class="restaurant-details">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h3 class="restaurant-name">@restaurant.Name</h3>
                                    <span class="rating-badge"><i class="bi bi-star-fill me-1"></i> @restaurant.Rating</span>
                                </div>
                                <p class="restaurant-category"><i class="bi bi-tag me-1"></i> @restaurant.Category</p>
                                <div class="restaurant-meta">
                                    <span><i class="bi bi-geo-alt me-1"></i> @restaurant.Distance mi</span>
                                    <span><i class="bi bi-cash me-1"></i> @string.Concat(Enumerable.Repeat("$", restaurant.PriceLevel))</span>
                                </div>
                            </div>
                            <div class="restaurant-action">
                                <a asp-controller="Restaurants" asp-action="Details" asp-route-id="@restaurant.Id"
                                   class="btn btn-primary w-100 rounded-pill">
                                    <i class="bi bi-arrow-right-circle me-1"></i> Order Now
                                </a>
                            </div>
                        </article>
                    </div>
            }
        </div>
        <div class="text-center mt-5 animate__animated animate__fadeInUp">
            <a asp-controller="Restaurants" asp-action="Index" class="btn btn-outline-primary rounded-pill px-4 py-2">
                Explore All Restaurants <i class="bi bi-arrow-right ms-1"></i>
            </a>
        </div>
    </div>
</section>

<!-- Popular Dishes Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h2 class="h3 fw-bold mb-0 animate__animated animate__fadeInUp">Trending Dishes</h2>
            <div class="swiper-navigation d-flex gap-2 animate__animated animate__fadeInUp">
                <button class="btn btn-sm btn-light rounded-circle dish-swiper-prev"><i class="bi bi-chevron-left"></i></button>
                <button class="btn btn-sm btn-light rounded-circle dish-swiper-next"><i class="bi bi-chevron-right"></i></button>
            </div>
        </div>
        <div class="swiper dish-swiper animate__animated animate__fadeIn">
            <div class="swiper-wrapper">
                @foreach (var dish in Model.PopularDishes)
                {
                        <div class="swiper-slide">
                            <article class="dish-card">
                                <div class="dish-image-container">
                                    <img src="@dish.ImageUrl" alt="@dish.Name" class="dish-image"/>
                                    <div class="dish-price-badge">@dish.Price.ToString("C")</div>
                                </div>
                                <div class="dish-details">
                                    <h3 class="dish-name">@dish.Name</h3>
                                    <p class="dish-restaurant"><i class="bi bi-shop me-1"></i> @dish.RestaurantName</p>
                                    <a asp-controller="Restaurants" asp-action="Details" asp-route-id="@dish.RestaurantId"
                                       class="btn btn-sm btn-primary rounded-pill w-100">
                                        <i class="bi bi-cart-plus me-1"></i> Add to Cart
                                    </a>
                                </div>
                            </article>
                        </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Offers & Promotions Section -->
<section class="py-5">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h2 class="h3 fw-bold mb-0 animate__animated animate__fadeInUp">Exclusive Offers</h2>
            <div class="swiper-navigation d-flex gap-2 animate__animated animate__fadeInUp">
                <button class="btn btn-sm btn-light rounded-circle offer-swiper-prev"><i class="bi bi-chevron-left"></i></button>
                <button class="btn btn-sm btn-light rounded-circle offer-swiper-next"><i class="bi bi-chevron-right"></i></button>
            </div>
        </div>
        <div class="swiper offer-swiper animate__animated animate__fadeIn">
            <div class="swiper-wrapper">
                @foreach (var offer in Model.Offers)
                {
                        <div class="swiper-slide">
                            <div class="offer-card">
                                <div class="offer-details">
                                    <h3 class="offer-title">@offer.Title</h3>
                                    <p class="offer-description">@offer.Description</p>
                                    <p class="offer-restaurant"><i class="bi bi-shop me-1"></i> @offer.RestaurantName</p>
                                    <p class="offer-validity text-muted small">
                                        Valid until @offer.ValidUntil.ToString("MMM dd, yyyy")
                                    </p>
                                    <button class="btn btn-primary btn-sm rounded-pill copy-offer-code"
                                            data-code="@offer.Title" aria-label="Copy offer code">
                                        <i class="bi bi-clipboard me-1"></i> Copy Code
                                    </button>
                                </div>
                            </div>
                        </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Become a Partner Section -->
<section class="py-5 bg-gradient-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <span class="badge bg-white text-primary mb-2 animate__animated animate__fadeInUp">Restaurant Partners</span>
                <h2 class="h2 fw-bold mb-3 animate__animated animate__fadeInUp">Grow with @appName</h2>
                <p class="lead mb-4 animate__animated animate__fadeInUp animate__delay-1s">
                    Partner with us to reach more customers. We manage delivery and marketing, so you can focus on great food.
                </p>
                <div class="row g-4 mb-4">
                    <div class="col-md-6 animate__animated animate__fadeInUp animate__delay-2s">
                        <div class="partner-benefit">
                            <div class="partner-benefit-icon"><i class="bi bi-graph-up"></i></div>
                            <h3 class="partner-benefit-title">Boost Revenue</h3>
                            <p class="partner-benefit-text">Up to 30% sales increase with our customer base.</p>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp animate__delay-3s">
                        <div class="partner-benefit">
                            <div class="partner-benefit-icon"><i class="bi bi-megaphone"></i></div>
                            <h3 class="partner-benefit-title">Enhanced Visibility</h3>
                            <p class="partner-benefit-text">Reach thousands of local customers.</p>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp animate__delay-4s">
                        <div class="partner-benefit">
                            <div class="partner-benefit-icon"><i class="bi bi-tools"></i></div>
                            <h3 class="partner-benefit-title">Easy Integration</h3>
                            <p class="partner-benefit-text">Connect seamlessly with your POS system.</p>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp animate__delay-5s">
                        <div class="partner-benefit">
                            <div class="partner-benefit-icon"><i class="bi bi-truck"></i></div>
                            <h3 class="partner-benefit-title">Reliable Delivery</h3>
                            <p class="partner-benefit-text">Fresh food delivered by our fleet.</p>
                        </div>
                    </div>
                </div>
                <a asp-controller="Home" asp-action="Contact" class="btn btn-light text-primary rounded-pill px-4 py-2 fw-medium animate__animated animate__fadeInUp animate__delay-6s">
                    <i class="bi bi-building-add me-2"></i> Become a Partner
                </a>
            </div>
            <div class="col-lg-6 animate__animated animate__fadeIn animate__delay-2s">
                <div class="partner-image-container text-center">
                    <img src="/images/restaurant-partner.jpg" alt="Restaurant Partner" class="img-fluid rounded-4 shadow-lg"/>
                    <div class="partner-stats-container">
                        <div class="partner-stats-item">
                            <div class="partner-stats-value">1,200+</div>
                            <div class="partner-stats-label">Restaurant Partners</div>
                        </div>
                        <div class="partner-stats-item">
                            <div class="partner-stats-value">32%</div>
                            <div class="partner-stats-label">Revenue Increase</div>
                        </div>
                        <div class="partner-stats-item">
                            <div class="partner-stats-value">96%</div>
                            <div class="partner-stats-label">Partner Satisfaction</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Exploration Section -->
<section class="py-5">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h2 class="h3 fw-bold mb-0 animate__animated animate__fadeInUp">Browse by Cuisine</h2>
            <div class="swiper-navigation d-flex gap-2 animate__animated animate__fadeInUp">
                <button class="btn btn-sm btn-light rounded-circle category-swiper-prev"><i class="bi bi-chevron-left"></i></button>
                <button class="btn btn-sm btn-light rounded-circle category-swiper-next"><i class="bi bi-chevron-right"></i></button>
            </div>
        </div>
        <div class="swiper category-swiper animate__animated animate__fadeIn">
            <div class="swiper-wrapper">
                @foreach (var category in Model.Categories)
                {
                        <div class="swiper-slide">
                            <a asp-controller="Category" asp-action="Details" asp-route-id="@category.Id" class="cuisine-card">
                                <div class="cuisine-image-container">
                                    <img src="@category.ImageUrl" alt="@category.Name" class="cuisine-image"/>
                                    <div class="cuisine-overlay">
                                        <h3 class="cuisine-name">@category.Name</h3>
                                    </div>
                                </div>
                            </a>
                        </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- App Features Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="h3 fw-bold mb-4 animate__animated animate__fadeInUp">Why Choose @appName?</h2>
                <div class="row g-4">
                    <div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: 100ms">
                        <div class="app-feature">
                            <div class="app-feature-icon"><i class="bi bi-clock"></i></div>
                            <div class="app-feature-content">
                                <h3 class="app-feature-title">Fast Delivery</h3>
                                <p class="app-feature-text">Meals delivered in 30 minutes or less.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: 200ms">
                        <div class="app-feature">
                            <div class="app-feature-icon"><i class="bi bi-shop"></i></div>
                            <div class="app-feature-content">
                                <h3 class="app-feature-title">Premium Restaurants</h3>
                                <p class="app-feature-text">Top-rated local restaurants.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: 300ms">
                        <div class="app-feature">
                            <div class="app-feature-icon"><i class="bi bi-geo-alt"></i></div>
                            <div class="app-feature-content">
                                <h3 class="app-feature-title">Live Tracking</h3>
                                <p class="app-feature-text">Real-time order tracking.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: 400ms">
                        <div class="app-feature">
                            <div class="app-feature-icon"><i class="bi bi-heart"></i></div>
                            <div class="app-feature-content">
                                <h3 class="app-feature-title">Smart Recommendations</h3>
                                <p class="app-feature-text">AI-driven personalized suggestions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center animate__animated animate__fadeIn" style="animation-delay: 200ms">
                <div class="app-mockup-container">
                    <img src="/images/app-mockup.png" alt="FoodFast Pro Mobile App" class="img-fluid rounded-4 shadow-lg"/>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h3 fw-bold mb-2 animate__animated animate__fadeInUp">What Our Customers Say</h2>
            <p class="text-muted animate__animated animate__fadeInUp">Trusted by thousands for their food delivery needs.</p>
        </div>
        <div class="swiper testimonial-swiper animate__animated animate__fadeIn">
            <div class="swiper-wrapper">
                @foreach (var testimonial in Model.Testimonials)
                {
                        <div class="swiper-slide">
                            <div class="testimonial-card">
                                <div class="testimonial-rating">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                </div>
                                <p class="testimonial-text">"@testimonial.Quote"</p>
                                <div class="testimonial-author">
                                    <div class="testimonial-avatar">
                                        <img src="@testimonial.AvatarUrl" alt="@testimonial.Name" />
                                    </div>
                                    <div class="testimonial-info">
                                        <h4 class="testimonial-name">@testimonial.Name</h4>
                                        <p class="testimonial-location">@testimonial.Location</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                }
            </div>
            <div class="swiper-pagination testimonial-pagination"></div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 text-center cta-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="h3 fw-bold mb-3 animate__animated animate__fadeInUp">Ready for Premium Dining?</h2>
                <p class="mb-4 animate__animated animate__fadeInUp" style="animation-delay: 100ms">
                    Download @appName now for exclusive offers and real-time tracking.
                </p>
                <div class="d-flex justify-content-center gap-3 animate__animated animate__fadeInUp" style="animation-delay: 200ms">
                    <a href="https://www.apple.com/app-store/" class="app-download-btn app-store">
                        <i class="bi bi-apple"></i>
                        <div>
                            <small>Download on the</small>
                            <div>App Store</div>
                        </div>
                    </a>
                    <a href="https://play.google.com/store" class="app-download-btn google-play">
                        <i class="bi bi-google-play"></i>
                        <div>
                            <small>Get it on</small>
                            <div>Google Play</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

@section Styles {
        <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
}

@section Scripts {
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <script src="~/js/home.js" asp-append-version="true" defer></script>
}