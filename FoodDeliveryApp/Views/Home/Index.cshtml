@model FoodDeliveryApp.ViewModels.Home.HomeViewModel

@{
    ViewData["Title"] = "Home Page";
}

<section class="hero" style="background-image: url('@Model.Hero.BackgroundImageUrl');" role="banner"
    aria-label="Hero section with search">
    <!-- Floating Elements for Visual Interest -->
    <div class="hero-floating-elements">
        <div class="hero-floating-element"></div>
        <div class="hero-floating-element"></div>
        <div class="hero-floating-element"></div>
        <div class="hero-floating-element"></div>
    </div>
    
    <div class="container hero-container">
        <h1 class="animate-fade-in-up">Delicious Food Delivered To Your Doorstep</h1>
        <p class="animate-fade-in-up delay-100">Explore the best restaurants and dishes in your area.</p>
        
        <form class="hero-search animate-fade-in-up delay-200" method="get" action="/Menu/Search" role="search"
            aria-label="Search for restaurants or dishes">
            <div class="input-group">
                <span class="input-group-text bg-white border-0">
                    <i class="fas fa-search text-primary"></i>
                </span>
                <input type="search" name="q" class="form-control border-0" placeholder="Search for restaurants or dishes..." 
                    aria-label="Search" required />
                <button type="submit" class="btn btn-primary px-4 fw-semibold" aria-label="Submit search">
                    Search Now
                </button>
            </div>
        </form>
        
        <div class="hero-features mt-5 animate-fade-in-up delay-300">
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3 mb-md-0">
                    <div class="hero-feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="feature-text">
                            <h3>Quality Food</h3>
                            <p>From top-rated restaurants</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3 mb-md-0">
                    <div class="hero-feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="feature-text">
                            <h3>Fast Delivery</h3>
                            <p>To your doorstep</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="hero-feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <div class="feature-text">
                            <h3>24/7 Support</h3>
                            <p>Always here to help</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="food-categories" aria-label="Food categories">
    <div class="container">
        <div class="section-header text-center mb-5 animate-fade-in">
            <span class="section-subtitle">Explore Food</span>
            <h2>Food Categories</h2>
            <p class="section-description mx-auto">Discover a variety of cuisines from around the world</p>
        </div>
        
        <div class="row g-4 justify-content-center">
            @foreach (var category in Model.Categories)
            {
                <div class="col-6 col-md-4 col-lg-3 animate-fade-in" data-delay="@(100 * Model.Categories.IndexOf(category))">
                    <article class="category-card" role="region" aria-labelledby="category-@category.Id">
                        <div class="category-img-wrapper">
                            <img src="@category.ImageUrl" alt="@category.Name" class="img-fluid" loading="lazy" />
                            <div class="category-overlay">
                                <a href="/Menu/ByCategory/@category.Id" class="btn btn-sm btn-light rounded-pill">
                                    Explore <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                        <div class="category-content p-4">
                            <h3 id="category-@category.Id" class="category-title">@category.Name</h3>
                            <p class="category-description">@category.Description</p>
                            <div class="category-meta">
                                <span class="badge bg-light text-primary">
                                    <i class="fas fa-store me-1"></i> @category.RestaurantCount restaurant(s)
                                </span>
                            </div>
                        </div>
                    </article>
                </div>
            }
        </div>
    </div>
</section>

<section class="popular-restaurants" aria-label="Popular restaurants">
    <div class="container">
        <div class="section-header text-center mb-5 animate-fade-in">
            <span class="section-subtitle">Top Rated</span>
            <h2>Popular Restaurants</h2>
            <p class="section-description mx-auto">Discover the most loved restaurants in your area</p>
        </div>
        
        <div class="restaurant-controls mb-4 d-flex justify-content-between align-items-center animate-fade-in">
            <div class="restaurant-filter">
                <button class="btn btn-sm btn-primary active me-2">All</button>
                <button class="btn btn-sm btn-outline-primary me-2">Fast Food</button>
                <button class="btn btn-sm btn-outline-primary me-2">Italian</button>
                <button class="btn btn-sm btn-outline-primary">Asian</button>
            </div>
            <div class="restaurant-navigation">
                <button class="btn btn-sm btn-light rounded-circle me-2" id="prevRestaurant" aria-label="Previous">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="btn btn-sm btn-light rounded-circle" id="nextRestaurant" aria-label="Next">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        
        <div id="popularRestaurantsCarousel" class="carousel slide" data-bs-ride="carousel" tabindex="0"
            aria-label="Popular Restaurants Carousel">
            <div class="carousel-inner">
                @{
                    var chunkSize = 3;
                    var total = Model.TopRatedRestaurants.Count;
                }
                @for (int i = 0; i < total; i += chunkSize)
                {
                    var chunk = Model.TopRatedRestaurants.Skip(i).Take(chunkSize).ToList();
                    var activeClass = i == 0 ? "active" : "";
                    <div class="carousel-item @activeClass">
                        <div class="row justify-content-center g-4">
                            @foreach (var restaurant in chunk)
                            {
                                <div class="col-md-4 animate-fade-in" data-delay="@(100 * chunk.IndexOf(restaurant))">
                                    <article class="restaurant-card" role="group" aria-labelledby="restaurant-@restaurant.Id">
                                        <div class="restaurant-img-wrapper">
                                            <img src="@restaurant.ImageUrl" alt="@restaurant.Name" class="img-fluid" loading="lazy" />
                                            @if (restaurant.Rating >= 4.5)
                                            {
                                                <div class="restaurant-badge featured">
                                                    <i class="fas fa-award me-1"></i> Featured
                                                </div>
                                            }
                                            <div class="restaurant-overlay">
                                                <a href="/Restaurant/Details/@restaurant.Id" class="btn btn-sm btn-light rounded-pill">
                                                    View Menu <i class="fas fa-arrow-right ms-1"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="restaurant-content p-4">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h3 id="restaurant-@restaurant.Id" class="restaurant-title mb-0">@restaurant.Name</h3>
                                                <div class="restaurant-rating">
                                                    <i class="fas fa-star text-warning"></i>
                                                    <span>@restaurant.Rating</span>
                                                </div>
                                            </div>
                                            <p class="restaurant-description">@restaurant.Description</p>
                                            <div class="restaurant-meta d-flex justify-content-between align-items-center">
                                                <span class="restaurant-reviews">
                                                    <i class="fas fa-comment-alt me-1"></i> @restaurant.ReviewCount reviews
                                                </span>
                                                <span class="restaurant-delivery">
                                                    <i class="fas fa-bicycle me-1"></i> @restaurant.DeliveryFee.ToString("C")
                                                </span>
                                            </div>
                                        </div>
                                    </article>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
            <button class="carousel-control-prev d-none" type="button" data-bs-target="#popularRestaurantsCarousel"
                data-bs-slide="prev" aria-label="Previous">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next d-none" type="button" data-bs-target="#popularRestaurantsCarousel"
                data-bs-slide="next" aria-label="Next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
        </div>
        
        <div class="text-center mt-5 animate-fade-in">
            <a href="/Restaurant" class="btn btn-outline-primary rounded-pill px-4">
                View All Restaurants <i class="fas fa-arrow-right ms-1"></i>
            </a>
        </div>
    </div>
</section>

<section class="featured-dishes">
    <div class="container">
        <h2>Featured Dishes</h2>
        <div class="row g-4 justify-content-center">
            @foreach (var dish in Model.FeaturedDishes)
            {
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="dish-card">
                        <img src="@dish.ImageUrl" alt="@dish.Name" class="img-fluid rounded" />
                        <h3 class="mt-3">@dish.Name</h3>
                        <p>@dish.Description</p>
                        <p>Price: @dish.Price.ToString("C")</p>
                        <p>@(dish.IsAvailable ? "Available" : "Currently Unavailable")</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="special-offers">
    <div class="container">
        <h2>Special Offers</h2>
        <div class="row g-4 justify-content-center">
            @foreach (var promo in Model.ActivePromotions)
            {
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="offer-card">
                        <h3>@promo.Code</h3>
                        <p>@promo.Description</p>
                        <p>Discount: @(promo.IsPercentage? promo.DiscountValue + "%" : promo.DiscountValue.ToString("C"))
                        </p>
                        <p>Minimum Order: @promo.MinimumOrderAmount.ToString("C")</p>
                        <p>Valid: @promo.StartDate.ToShortDateString() - @promo.EndDate.ToShortDateString()</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="how-it-works">
    <div class="container">
        <h2>How It Works</h2>
        <ol class="steps-list">
            <li>Search for your favorite food or restaurant</li>
            <li>Place your order easily</li>
            <li>Enjoy fast delivery at your doorstep</li>
        </ol>
    </div>
</section>

<section class="testimonials">
    <div class="container">
        <h2>What Our Customers Say</h2>
        <blockquote>
            "Fast delivery and delicious food! Highly recommend FoodDeliveryApp."
            <footer>- Happy Customer</footer>
        </blockquote>
    </div>
</section>

<section class="download-app">
    <div class="container">
        <h2>Get Our App</h2>
        <p>Order food on the go with our mobile app.</p>
        <img src="@Model.AppDownload.AppScreenshotUrl" alt="App Screenshot" class="img-fluid rounded" />
        <a href="#" class="app-download-button">Download Now</a>
    </div>
</section>

<section class="become-partner">
    <div class="container">
        <h2>Become a Partner</h2>
        <p>Join FoodDeliveryApp and grow your restaurant business with us.</p>
        <a href="/Partner/Join" class="partner-button">Join Now</a>
    </div>
</section>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Connect custom navigation buttons to carousel
            const prevButton = document.getElementById('prevRestaurant');
            const nextButton = document.getElementById('nextRestaurant');
            const carousel = new bootstrap.Carousel(document.getElementById('popularRestaurantsCarousel'));
            
            prevButton.addEventListener('click', function() {
                carousel.prev();
            });
            
            nextButton.addEventListener('click', function() {
                carousel.next();
            });
            
            // Add animation to elements when they come into view
            const animatedElements = document.querySelectorAll('.animate-fade-in');
            
            if ('IntersectionObserver' in window) {
                const animationObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const element = entry.target;
                            const delay = element.dataset.delay || 0;
                            
                            setTimeout(() => {
                                element.classList.add('fade-in');
                            }, delay);
                            
                            animationObserver.unobserve(element);
                        }
                    });
                }, {
                    threshold: 0.1
                });
                
                animatedElements.forEach(element => {
                    animationObserver.observe(element);
                });
            } else {
                // Fallback for browsers that don't support IntersectionObserver
                animatedElements.forEach(element => {
                    element.classList.add('fade-in');
                });
            }
        });
    </script>
}
